<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand text-white" href="/">
      <i class="fas fa-brain me-2"></i>
      MediQuest
    </a>

    <!-- Add navbar toggler button for mobile -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarContent"
      aria-controls="navbarContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <i class="fas fa-bars text-white"></i>
    </button>

    <div class="collapse navbar-collapse" id="navbarContent">
      <div
        class="ms-auto d-flex flex-column flex-lg-row align-items-start align-items-lg-center gap-2 mt-3 mt-lg-0"
      >
        <a href="/additional-quizzes" class="btn btn-outline-light">
          <i class="fas fa-book me-2"></i>Categories
        </a>
        <a href="/stats" class="btn btn-outline-light">
          <i class="fas fa-chart-line me-2"></i>Statistics
        </a>

        <% if (typeof isAuthenticated !== 'undefined' && isAuthenticated) { %>
        <a
          href="/subscription"
          class="btn <%= typeof locals !== 'undefined' && locals.isPremium ? 'btn-warning' : 'btn-outline-light' %>"
        >
          <i
            class="fas <%= typeof locals !== 'undefined' && locals.isPremium ? 'fa-crown' : 'fa-star' %> me-2"
          ></i>
          <%= typeof locals !== 'undefined' && locals.isPremium ? 'Premium' :
          'Upgrade' %>
        </a>
        <div class="dropdown">
          <button
            class="btn btn-outline-light dropdown-toggle"
            type="button"
            data-bs-toggle="dropdown"
          >
            <i class="fas fa-user me-2"></i><%= typeof user !== 'undefined' &&
            user && user.name ? user.name : 'User' %>
          </button>
          <ul class="dropdown-menu">
            <li>
              <a class="dropdown-item" href="/subscription"
                ><i
                  class="fas <%= typeof locals !== 'undefined' && locals.isPremium ? 'fa-crown' : 'fa-star' %> me-2"
                ></i
                ><%= typeof locals !== 'undefined' && locals.isPremium ?
                'Subscription Status' : 'Upgrade to Premium' %></a
              >
            </li>
            <li><hr class="dropdown-divider" /></li>
            <li>
              <form action="/auth/logout" method="POST" class="d-inline">
                <% if (typeof csrfToken !== 'undefined' && csrfToken) { %>
                <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
                <% } %>
                <button type="submit" class="dropdown-item">
                  <i class="fas fa-sign-out-alt me-2"></i>Logout
                </button>
              </form>
            </li>
          </ul>
        </div>
        <% } else { %>
        <a href="/auth/login" class="btn btn-outline-light">
          <i class="fas fa-sign-in-alt me-2"></i>Login
        </a>
        <a href="/auth/signup" class="btn btn-light text-primary">
          <i class="fas fa-user-plus me-2"></i>Sign Up
        </a>
        <% } %>

        <button
          id="darkModeToggle"
          class="btn btn-outline-light"
          onclick="toggleDarkMode()"
        >
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </div>
  </div>
</nav>
